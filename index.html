<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>금연사업 지침 문의 Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-bg': '#131314',
              'brand-surface': '#1e1f20',
              'brand-primary': '#8ab4f8',
              'brand-secondary': '#4e5052',
              'brand-text-primary': '#e8eaed',
              'brand-text-secondary': '#bdc1c6',
            }
          }
        }
      }
    </script>
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.16.0"
      }
    }
    </script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-brand-bg text-brand-text-primary">
    <div id="root"></div>
    <script>
      // WARNING: Do not expose your API key in production.
      // This is for demonstration purposes only.
      window.process = {
        env: {
          API_KEY: 'AIzaSyCQHIDHCFKit9tGZuWgW82aFWNrY6AM5XU'
        }
      }
    </script>
    <script type="text/babel" data-type="module">
      import { GoogleGenAI } from "@google/genai";

      const { useState, useCallback, useMemo, useRef, useEffect, StrictMode } = React;

      // --- Inlined from types.ts ---
      const Role = {
        USER: 'user',
        MODEL: 'model',
      };

      // --- Inlined from data/sourceText.ts ---
      const SOURCE_TEXT = `
--- START OF DOCUMENT 1: 2024년 지역사회 통합건강증진사업 안내 (금연) ---

==Start of OCR for page 2==
2024년 지역사회중심 금연지원서비스 주요 변경사항
□ 지역사회 통합건강증진사업 안내(금연)
구분 2023년 2024년 개정사유 쪽수
보건소 금연
클리닉 운영
1) 운영
개요
바) 서비스 관리
○ 금연서비스통합정보시스템을 
통해 등록 및 관리
 - 대상자 등록, 서비스제공 관리, 
금연성공평가
 * (신설)
바) 서비스 관리
○ (현행 유지)
 - (현행 유지)
 * 단순 보험사 제출 목적 CO 또는 코티닌
측정 제한
보건소 금연사업 
운영 효율화를 
위한 서비스 관리 
방법 추가
p45
찾아가는 금연
클리닉
2) 찾아가는
금연클리닉의 
운영
○ 대상 : 금연분위기를 조성하고자 
하는 기업, 마을, 학교, 단체의 장이 
신청하거나, 접근성 등을 고려하여 
지자체에서 판단하여 대상을 선정
 * 지역금연지원센터의 위기 청소년, 
여성, 대학생 찾아가는 금연지원
서비스와 중복 시행되지 않도록 
사전 협의 및 조정 필요
○ (현행 유지)
 * 대상자 발굴 시 지역금연지원센터의 
생활터 금연환경 조성 사업과 중복 
시행되지 않도록 사전 협의 및 조정 
필요
지역금연지원센터 
사업 내용 변경 p57
예산
편성 
및
집행
기준
○ 인건비
 - 급여는 월 213만원 이상 지급
(4대 보험료 본인부담금 포함) 
○ 인건비
 - 급여는 월 218만원 이상 지급
(4대 보험료 본인부담금 포함) 
인건비 최저기준 
명시 p63
2) 예산 집행기준
○ 인력 미채용 등으로 인한 예산 불용이 
예상될 경우 ‘인건비’를 ‘사업비’
로 자체 전용 가능
2) 예산 집행기준
○ (삭제) 통합건강증진사업 
총괄 지침 내 예산
집행기준 반영
p63
==End of OCR for page 2==
==Start of OCR for page 3==
구분 2023년 2024년 개정사유 쪽수
예산
편성 
및 
집행
기준
○ 본 사업은 경상보조사업이므로 
자산취득성 집행 불가, 단, 자본
보조인 시설개선사업(농어촌의
료서비스개선사업(도농복합시 
대상), 건강생활지원센터 확충) 
지원 대상인 지자체에서는 농어
촌의료서비스개선사업, 건강생
활지원센터 확충(자본보조) 예
산 활용 가능
 ※ 예시) 금연클리닉 상담실 근무환
경개선, 건강증진 장비(금
연 교육용 모형들, 일산화
탄소 측정기, 니코틴소변
검사기 등) 구입
○ 본 사업은 경상보조사업이므로 자산취
득성 집행 불가, 단, 사업 수행(금연지
원서비스 제공, 금연환경조성 등)과 직
접적인 관련이 있는 물품은 구입･사용
할 수 있음
 ※ 예시) 건강증진 장비(금연 교육용 모형들, 
일산화탄소 측정기, 니코틴소변
검사기 등) 구입
○ 자본보조인 시설개선사업(농어촌의료
서비스개선사업(도농복합시 대상), 
건강생활지원센터 확충) 지원 대상인 
지자체에서는 농어촌의료서비스개선
사업, 건강생활지원센터 확충(자본보조) 
예산 활용 가능
보건소 금연사업 
운영 효율화를 위
한 예산집행 기준 
추가･변경
p63
※ 흡연여부 확인을 위한 CO측정기 
구입 안내 
∙ (신설)
∙ 일산화탄소 가스 분석을 위한 장치 
구매 및 사용 시 국내 허가(인증)
여부를 반드시 확인하여 인증된 
제품만 구매 사용 가능, 그러나 단순 
흡연여부만 확인하기 위한 경우 
비 해당
 (참조) 현재 사용하고 있는 CO측
정기가 단순흡연여부확인 기기인지, 
일산화탄소 가스분석 기기인지 확인
(식약처 의료기기관리과)하여 목
적에 부합한 기기 사용필수(복지부 
건강증진과-3919(2020.11.19.)) 
문서하달 참조
※ 흡연여부 확인을 위한 CO측정기 구입 
및 사용 안내 
∙ ‘단순흡연여부확인 기기’ 또는 ‘일산화
탄소 가스분석 기기’ 모두 구입 및 사용 
가능
∙ ‘일산화탄소 가스 분석 기기’ 구매 시 국내 
허가(인증)여부를 반드시 확인하여 인
증된 제품만 구매 사용 가능 
(삭제)
CO측정기 구입 
및 사용 기준 변경 p63
사업
실적
보고
○ 정부합동평가지표 안내
 - 2024년(23년 실적) 합동평가지표
(금연) 세부내용
○ 정부합동평가지표 안내
 - 2025년(24년 실적) 합동평가지표(금연) 
세부내용
24년 합동평가 
지표 설명 수정 p70~71
개인
정보
보호
관련
◌ 개인정보 처리 동의서 ◌ 개인정보 처리 동의서 개정 개인정보 수집제
공 동의서 가이드
라인에 따라 개정
p72-75
2) 개인정보보호 관련 안내 2) 개인정보보호 관련 안내 개정 개인정보보호법 
및 개인보호 보호
규정에 따라 개정
p98
-101
==End of OCR for page 3==
==Start of OCR for page 4==
1부 국가금연정책 개요
1. 금연정책의 배경 및 필요성 ···················································································3
2. 세계 금연정책 동향 ·····························································································12
3. 우리나라 금연정책 추진경과 ················································································18
4. 지역사회 금연정책 추진방향 ················································································28
2부 지역사회중심 금연지원서비스 운영
Ⅰ. 지역사회중심 금연지원서비스 개요 ··················································33
1. 사업 개요 ·············································································································33
1) 사업 목적 ·····················································································································33
2) 추진경과 ·······················································································································33
3) 수행기관 ·······················································································································35
4) 사업 내용 ·····················································································································35
5) 대상자 ···························································································································35
2. 사업 추진체계 ······································································································37
1) 사업추진체계도 ·············································································································37
2) 기관별 역할 ··················································································································37
Ⅱ. 지역사회중심 금연지원서비스 내용 및 방법 ···································40
1. 금연 환경조성 ······································································································40
1) 금연구역 확대 정착(지도점검 강화) ············································································40
2) 포괄적 금연사업 추진 ··································································································41
2. 보건소 금연클리닉 운영 ·······················································································44
1) 운영 개요 ·····················································································································44
2) 서비스 제공절차 및 방법 ····························································································47
3) 서비스 종결처리 및 평가 ····························································································55
==End of OCR for page 4==
==Start of OCR for page 5==
3. 찾아가는 금연클리닉(이동 금연클리닉) ·······························································57
1) 개요 ······························································································································57
2) 찾아가는 금연클리닉의 운영 ·······················································································57
4. 시도 단위 금연사업 ·····························································································58
1) 개요 ······························································································································58
2) 내용 ······························································································································58
Ⅲ. 행정사항 ························································································59
1. 인력 ······················································································································59
1) 금연사업 담당자 ···········································································································59
2) 금연클리닉 담당의사 ····································································································59
3) 금연상담사 ····················································································································59
4) 금연지도원 ····················································································································61
2. 예산편성 및 집행기준 ··························································································62
1) 예산운영 기본원칙 ·······································································································62
2) 예산 집행기준 ··············································································································63
3. 사업실적 보고 ······································································································65
1) 사업실적 보고 ··············································································································65
2) 사업실적 지표 ··············································································································67
3) 정부합동평가지표 안내 ······························································································70
Ⅳ. 관련 서식 ··························································································72
1. 개인정보 처리 동의서 ··························································································72
2. 금연클리닉 등록카드 및 니코틴의존도 평가문항 ················································76
3. 금연클리닉 상담관리카드 및 일일금연상담 기록지 ··········································80
4. 시･도별 금연사업 실적보고 서식 ········································································84
1) 금연클리닉 운영실적(OOO보건소) ··············································································84
2) 금연구역 지정 관리 이행실태 모니터링 ·····································································84
==End of OCR for page 5==
==Start of OCR for page 6==
3부 참고자료
Ⅰ. 제5차 국민건강증진종합계획(HP2030, 2021~2030) - 금연부분 ···93
1. 제5차 국민건강증진종합계획(HP2030) 소개 ······················································93
1) 수립배경 ·······················································································································93
2) 대한민국의 현재 수준 ································································································93
3) 제5차 국민건강증진종합계획(HP2023) 주요 과제 ····················································94
2. 제5차 국민건강증진종합계획(HP2030) 중점과제별 성과지표(금연) ··················95
1) 신종담배의 무분별한 시장진입 차단 ···········································································96
2) 담배제품 사용 감소를 위한 가격･비가격 규제 강화 ·················································97
3) 청소년･대학생･군인 등 미래흡연 고위험군 흡연예방사업 강화 ································97
Ⅱ. ｢금연서비스 통합정보시스템｣ 사용안내 ··········································98
1) 개인정보보호 관련 안내 ······························································································98
2) 금연서비스 통합정보시스템 개인정보 보호 상시모니터링 ·······································102
3) 종결 정보 수정 안내 ·································································································103
4) 시스템 사용 관련 Q&A ····························································································104
5) 국가건강검진결과 연계자료 조회 및 활용 안내 ·······················································114
6) 주요 개편사항 ············································································································116
Ⅲ. 국가 금연사업 현황 ········································································118
1. 흡연자 금연지원서비스 ······················································································118
1) 금연상담전화(1544-9030) ·······················································································118
2) 온라인 금연지원서비스(금연길라잡이, https://www.nosmokeguide.go.kr) ······121
3) 지역금연지원센터(지역사회 금연사업 지원, 생활터 금연환경 조성, 
금연캠프(전문치료형), 입원환자 금연지원서비스) 운영 ···········································123
4) 금연치료 건강보험 지원사업 ·····················································································126
==End of OCR for page 6==
==Start of OCR for page 7==
2. 금연환경조성 사업 ·····························································································127
1) 금연환경조성 제도화 ·································································································127
2) 대국민 홍보사업 ········································································································127
3. 학교 흡연예방 및 유아 흡연위해예방사업 ························································136
1) 학교흡연예방사업 ·······································································································136
2) 유아 흡연위해예방교육 ······························································································138
4. 국제협력 ·············································································································143
1) 담배규제기본협약(Framework Convention on Tobacco Control; 이하 FCTC) 개요 ···143
2) 담배규제기본협약(FCTC) 구성 및 내용 ···································································145
3) 담배규제기본협약(FCTC) 이행 및 이행실적 ····························································146
==End of OCR for page 7==
==Start of OCR for page 11==
3
1 금연정책의 배경 및 필요성
1) 흡연 현황
오늘날 전 세계적으로 약 10억 명이 흡연을 하고 있음. 그 중 80%는 매일 흡연자이며, 
성인 남성의 31%, 여성의 8%가 흡연자임. 흡연자들은 연간 약 6조 개피의 담배를 소비
하고 있는 것으로 추산 됨. 지난 30년 동안 남성 흡연율은 국가 간 편차가 있지만 약 
10% 감소했는데, 중저소득 국가보다 고소득 국가에서 감소폭이 더 크게 나타났음.1)
1980년 이후로 흡연율은 점차 감소하는 추세이나 흡연인구와 담배소비량은 증가해 왔
음.2) 세계보건기구는 담배규제기본협약(FCTC)을 통해 2010년을 기준으로 2025년까
지 15세 이상 흡연율의 30% 상대적 감소를 주요한 목표로 설정하였음3)
우리나라 성인남성의 현재 흡연율은 1998년 66.3%, 2001년 60.9%에서 담배가격 
인상(2004년･2015년), 금연구역 지정 및 확대, 금연 캠페인･홍보 등 강화된 금연정책 
시행에 따른 금연 규범의 확산으로 2022년 남자 흡연율 30.0%, 여자 흡연율 5.0%로 
2021년에 비해 남자는 1.3%p, 여자는 1.9%p 감소하여 1998년 이후 가장 낮은 수치
를 보임. 
1) Eriksen M et al. The Tobacco Atlas. American Cancer Society & World Lung Foundation, 2015
2) Ng M et al. Smoking prevalence and cigarette consumption in 187 countries, 1980-2012. JAMA 2014;311(2):183-92
3) World Health Organization. Global Status Report on NCDs, 2014
==End of OCR for page 11==
--- END OF DOCUMENT 1 ---

--- START OF DOCUMENT 2: 금연서비스 통합정보시스템 사용자매뉴얼 ---
==Start of OCR for page 3==
i
목 차
1. 개요 ··············································································································1
1.1. 시스템 개요 ·····················································································································3
1.1.1. 시스템 명칭 ······································································································3
1.1.2. 시스템 사용 목적 ·······························································································3
1.1.3. 시스템 사용자 ····································································································3
1.2. 매뉴얼 설명 ·····················································································································4
1.2.1. 사용자 권한 ········································································································4
1.2.2. 기능설명 ·············································································································4
1.2.3. 업데이트 ·············································································································4
2. 시스템 접속 및 환경 ·················································································5
2.1. 사용자 PC 환경 및 관리 ································································································7
2.2. 시스템 접속 방법 ···········································································································7
3. 화면 및 기능 구성 ·····················································································9
3.1. 화면 구성 ························································································································11
3.1.1. 메인화면(메뉴) ·································································································11
3.1.2. 메인화면(버튼) ·································································································12
3.1.3. 메인화면(공지사항/사업자료실/Q&A) ·····························································13
3.1.4. 메인화면(신규금연자료/추천자료) ····································································14
3.1.5. 메인화면(일정관리) ··························································································15
3.2. 공통 기능 ······················································································································16
4. 시스템 사용방법 ························································································17
4.1. 로그인 ·····························································································································19
4.1.1. 로그인 ··············································································································19
4.1.2. 사용자 PC 등록관리 ·······················································································20
4.1.3. 약관동의 ···········································································································21
==End of OCR for page 3==
==Start of OCR for page 149==
금연서비스 통합정보시스템 사용자매뉴얼
지역사회 통합건강증진사업안내(금연)
발 간 종 류 ｜ 시스템 매뉴얼
등 록 일 ｜ 2023년 12월
발 행 일 ｜ 2023년 12월
발 행 처 ｜ 한국건강증진개발원
주 소 ｜ (04933) 서울시 광진구 능동로 400, 9F 보건복지행정타운
전 화 번 호 ｜ 02-3781-3500(한국건강증진개발원)
홈 페 이 지 ｜ www.khepi.or.kr
인 쇄 처 ｜ 명문인쇄공사 / ☎ 02-2079-9200~2
==End of OCR for page 149==
--- END OF DOCUMENT 2 ---
`;
      
      // --- Inlined from services/geminiService.ts ---
      if (!process.env.API_KEY) {
          throw new Error("API_KEY environment variable not set");
      }
      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
      const SYSTEM_INSTRUCTION_TEMPLATE = `You are an expert assistant. Your name is NotebookLM Assistant. 
      You must answer questions based ONLY on the following source material provided. 
      Do not use any external knowledge or your pre-trained knowledge. 
      If the answer cannot be found in the source material, you must state that the information is not available in the provided context. 
      Be concise, helpful, and cite which part of the source you are referring to if possible.

      Here is the source material:
      ---START OF SOURCE---
      {sourceText}
      ---END OF SOURCE---`;

      function createNotebookChatSession(sourceText) {
          const systemInstruction = SYSTEM_INSTRUCTION_TEMPLATE.replace('{sourceText}', sourceText);

          const chat = ai.chats.create({
              model: 'gemini-2.5-flash',
              config: {
                  systemInstruction: systemInstruction,
              },
              history: [],
          });
          return chat;
      }

      // --- Inlined from components/icons/UserIcon.tsx ---
      const UserIcon = ({ className = "w-6 h-6" }) => (
          <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
          </svg>
      );

      // --- Inlined from components/icons/BotIcon.tsx ---
      const BotIcon = ({ className = "w-6 h-6" }) => (
          <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 24 24" fill="currentColor">
              <path d="M19.98 10.98c0-4.96-4.02-8.98-8.98-8.98S2 6.02 2 10.98v3.03c0 .54.44.99.99.99h1.01V12h-2c0-4.41 3.59-8 8-8s8 3.59 8 8v2.01h-2v-2.01c0-.54-.44-.99-.99-.99H18v2.01h2v-2.04zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm1.5-1.5c0-.83-.67-1.5-1.5-1.5S12 10.67 12 11.5s.67 1.5 1.5 1.5.5-.67.5-1.5z" opacity=".3" />
              <path d="M21 12v-1.02c0-4.96-4.02-8.98-8.98-8.98S3.04 6.02 3.04 10.98V12H2v2.01h1.05v2.99c0 .54.44.99.99.99H6v-2.01H4.04v-2.99H20v2.99h-2.01V20h2.01c.54 0 .99-.44.99-.99v-2.99H22V12h-1zm-9 3c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm1.5-1.5c0-.83-.67-1.5-1.5-1.5S10.5 10.67 10.5 11.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5z" />
          </svg>
      );

      // --- Inlined from components/icons/SendIcon.tsx ---
      const SendIcon = ({ className = "w-6 h-6" }) => (
          <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 24 24" fill="currentColor">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
          </svg>
      );
      
      // --- Inlined from components/SourceInfo.tsx ---
      const SourceInfo = () => {
          return (
              <div className="flex flex-col h-full bg-brand-surface rounded-lg p-4">
                  <h2 className="text-lg font-semibold text-brand-primary mb-3">자료 출처</h2>
                  <p className="text-sm text-brand-text-secondary mb-4">
                      This chatbot answers questions based on the following pre-loaded documents:
                  </p>
                  <ul className="list-disc list-inside text-brand-text-primary space-y-2">
                      <li>2024년 지역사회 통합건강증진사업 안내 (금연)</li>
                      <li>금연서비스 통합정보시스템 사용자매뉴얼</li>
                  </ul>
              </div>
          );
      };
      
      // --- Inlined from components/Message.tsx ---
      const Message = ({ message }) => {
          const isUser = message.role === Role.USER;

          return (
              <div className={`flex items-start gap-4 p-4 ${isUser ? '' : 'bg-brand-surface/50 rounded-lg'}`}>
                  <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${isUser ? 'bg-brand-secondary' : 'bg-brand-primary'}`}>
                      {isUser ? <UserIcon className="w-5 h-5 text-brand-text-primary" /> : <BotIcon className="w-5 h-5 text-brand-bg" />}
                  </div>
                  <div className="flex-1 pt-1">
                      <p className="font-semibold text-brand-text-primary mb-1">{isUser ? 'You' : 'Assistant'}</p>
                      <p className="text-brand-text-secondary whitespace-pre-wrap">{message.content}</p>
                  </div>
              </div>
          );
      };
      
      // --- Inlined from components/MessageInput.tsx ---
      const MessageInput = ({ currentMessage, setCurrentMessage, onSendMessage, isLoading, disabled }) => {
          const isInputDisabled = isLoading || disabled;

          return (
              <form onSubmit={onSendMessage} className="p-4 bg-brand-surface">
                  <div className="relative">
                      <input
                          type="text"
                          value={currentMessage}
                          onChange={(e) => setCurrentMessage(e.target.value)}
                          placeholder={disabled ? "Please provide source material first" : "Ask a question about your source..."}
                          disabled={isInputDisabled}
                          className="w-full bg-brand-bg border border-brand-secondary rounded-full py-3 pl-4 pr-12 text-brand-text-primary focus:outline-none focus:ring-2 focus:ring-brand-primary disabled:opacity-50"
                      />
                      <button
                          type="submit"
                          disabled={isInputDisabled || !currentMessage}
                          className="absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full text-brand-primary hover:bg-brand-primary/20 disabled:text-brand-secondary disabled:hover:bg-transparent transition-colors"
                      >
                          <SendIcon className="w-6 h-6" />
                      </button>
                  </div>
              </form>
          );
      };

      // --- Inlined from components/ChatWindow.tsx ---
      const ChatWindow = ({ messages, isLoading, sourceProvided }) => {
          const scrollRef = useRef(null);

          useEffect(() => {
              if (scrollRef.current) {
                  scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
              }
          }, [messages, isLoading]);

          return (
              <div ref={scrollRef} className="flex-1 overflow-y-auto p-4 space-y-4">
                  {messages.length === 0 && sourceProvided && (
                      <div className="text-center text-brand-text-secondary p-8 flex flex-col items-center">
                          <BotIcon className="w-12 h-12 mb-4 text-brand-primary" />
                          <h3 className="text-xl font-semibold text-brand-text-primary">Chat Ready</h3>
                          <p>Your source is loaded. Ask a question to begin.</p>
                      </div>
                  )}
                  {messages.map((msg, index) => (
                      <Message key={index} message={msg} />
                  ))}
                  {isLoading && messages.length > 0 && messages[messages.length - 1].role === 'user' && (
                       <div className="flex items-start gap-4 p-4 bg-brand-surface/50 rounded-lg">
                          <div className="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-brand-primary">
                              <BotIcon className="w-5 h-5 text-brand-bg" />
                          </div>
                          <div className="flex-1 pt-1">
                              <p className="font-semibold text-brand-text-primary mb-1">NotebookLM Assistant</p>
                              <div className="flex items-center gap-2">
                                  <span className="w-2 h-2 bg-brand-text-secondary rounded-full animate-pulse"></span>
                                  <span className="w-2 h-2 bg-brand-text-secondary rounded-full animate-pulse delay-75"></span>
                                  <span className="w-2 h-2 bg-brand-text-secondary rounded-full animate-pulse delay-150"></span>
                              </div>
                          </div>
                      </div>
                  )}
              </div>
          );
      };

      // --- Inlined from App.tsx ---
      const App = () => {
          const [sourceText] = useState(SOURCE_TEXT);
          const [messages, setMessages] = useState([]);
          const [currentMessage, setCurrentMessage] = useState('');
          const [isLoading, setIsLoading] = useState(false);
          const [error, setError] = useState(null);

          const chatSession = useMemo(() => {
              if (sourceText.trim()) {
                  return createNotebookChatSession(sourceText);
              }
              return null;
          }, [sourceText]);

          const handleSendMessage = useCallback(async (e) => {
              e.preventDefault();
              if (!currentMessage.trim() || !chatSession || isLoading) return;

              const userMessage = { role: Role.USER, content: currentMessage.trim() };
              setMessages(prev => [...prev, userMessage]);
              setCurrentMessage('');
              setIsLoading(true);
              setError(null);

              try {
                  const stream = await chatSession.sendMessageStream({ message: userMessage.content });

                  let modelResponse = '';
                  setMessages(prev => [...prev, { role: Role.MODEL, content: '' }]);

                  for await (const chunk of stream) {
                      modelResponse += chunk.text;
                      setMessages(prev => {
                          const newMessages = [...prev];
                          newMessages[newMessages.length - 1].content = modelResponse;
                          return newMessages;
                      });
                  }
              } catch (err) {
                  console.error(err);
                  const errorMessage = err instanceof Error ? err.message : 'An unknown error occurred.';
                  setError(`Failed to get response: ${errorMessage}`);
                  setMessages(prev => [...prev, { role: Role.MODEL, content: `Sorry, I encountered an error. ${errorMessage}` }]);
              } finally {
                  setIsLoading(false);
              }
          }, [chatSession, currentMessage, isLoading]);

          return (
              <div className="h-screen w-screen flex flex-col p-4 gap-4 bg-brand-bg">
                  <header className="text-center">
                      <h1 className="text-2xl font-bold text-brand-text-primary">금연사업 지침 문의 Chatbot</h1>
                      <p className="text-brand-text-secondary">AI assistant for "2024 Smoking Cessation Guide" and "System User Manual"</p>
                  </header>
                  
                  <main className="flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 min-h-0">
                      {/* Source Information Column */}
                      <div className="flex flex-col min-h-0">
                          <SourceInfo />
                      </div>
                      
                      {/* Chat Column */}
                      <div className="flex flex-col h-full bg-brand-surface rounded-lg min-h-0">
                          <div className="flex-1 flex flex-col min-h-0">
                            <h2 className="text-lg font-semibold text-brand-primary p-4 border-b border-brand-secondary">질문하기</h2>
                              <>
                                 {error && <div className="p-4 bg-red-900/50 text-red-300 border-b border-red-700">{error}</div>}
                                 <ChatWindow messages={messages} isLoading={isLoading} sourceProvided={!!chatSession} />
                                 <MessageInput
                                      currentMessage={currentMessage}
                                      setCurrentMessage={setCurrentMessage}
                                      onSendMessage={handleSendMessage}
                                      isLoading={isLoading}
                                      disabled={!chatSession}
                                  />
                              </>
                          </div>
                      </div>
                  </main>
              </div>
          );
      };

      // --- Inlined from index.tsx ---
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <StrictMode>
          <App />
        </StrictMode>
      );
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
